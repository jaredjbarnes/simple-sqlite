{"version":3,"sources":["../../src/sqlite/Repository.js"],"names":["Repository","database","name","primaryKeys","sqliteDatabaseWrapper","Sqlite3Wrapper","entity","entityToSqlFactory","EntityToSqlFactory","tableName","createInsertStatement","sql","values","runAsync","createDeleteStatement","createUpdateStatement","Provider","provider","getQueryProvider","Queryable","type"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEqBA,U;AACjB,8BAAsD;AAAA,YAAxCC,QAAwC,QAAxCA,QAAwC;AAAA,YAA9BC,IAA8B,QAA9BA,IAA8B;AAAA,oCAAxBC,WAAwB;AAAA,YAAxBA,WAAwB,oCAAV,CAAC,IAAD,CAAU;;AAAA;;AAClD,aAAKD,IAAL,GAAYA,IAAZ;AACA,aAAKD,QAAL,GAAgBA,QAAhB;AACA,aAAKG,qBAAL,GAA6B,IAAIC,wBAAJ,CAAmB,KAAKJ,QAAxB,CAA7B;AACA,aAAKE,WAAL,GAAmBA,WAAnB;AACH;;;;iCAEQG,M,EAAQ;;AAEb,gBAAMC,qBAAqB,IAAIC,4BAAJ,CAAuB;AAC9CC,2BAAW,KAAKP,IAD8B;AAE9CI,8BAF8C;AAG9CH,6BAAa,KAAKA;AAH4B,aAAvB,CAA3B;;AAFa,wCAQWI,mBAAmBG,qBAAnB,EARX;AAAA,gBAQLC,GARK,yBAQLA,GARK;AAAA,gBAQAC,MARA,yBAQAA,MARA;;AAUb,mBAAO,KAAKR,qBAAL,CAA2BS,QAA3B,CAAoCF,GAApC,EAAyCC,MAAzC,CAAP;AAEH;;;oCAEWN,M,EAAQ;AAChB,gBAAMC,qBAAqB,IAAIC,4BAAJ,CAAuB;AAC9CC,2BAAW,KAAKP,IAD8B;AAE9CI,8BAF8C;AAG9CH,6BAAa,KAAKA;AAH4B,aAAvB,CAA3B;;AADgB,yCAOQI,mBAAmBO,qBAAnB,EAPR;AAAA,gBAORH,GAPQ,0BAORA,GAPQ;AAAA,gBAOHC,MAPG,0BAOHA,MAPG;;AAShB,mBAAO,KAAKR,qBAAL,CAA2BS,QAA3B,CAAoCF,GAApC,EAAyCC,MAAzC,CAAP;AACH;;;oCAEWN,M,EAAQ;;AAEhB,gBAAMC,qBAAqB,IAAIC,4BAAJ,CAAuB;AAC9CC,2BAAW,KAAKP,IAD8B;AAE9CI,8BAF8C;AAG9CH,6BAAa,KAAKA;AAH4B,aAAvB,CAA3B;;AAFgB,yCAQQI,mBAAmBQ,qBAAnB,EARR;AAAA,gBAQRJ,GARQ,0BAQRA,GARQ;AAAA,gBAQHC,MARG,0BAQHA,MARG;;AAUhB,mBAAO,KAAKR,qBAAL,CAA2BS,QAA3B,CAAoCF,GAApC,EAAyCC,MAAzC,CAAP;AAEH;;;2CAEkB;AACf,mBAAO,IAAII,kBAAJ,CAAa;AAChBf,0BAAU,KAAKA;AADC,aAAb,CAAP;AAGH;;;gCAEO;AACJ,gBAAMgB,WAAW,KAAKC,gBAAL,EAAjB;;AAEA,mBAAO,IAAIC,mBAAJ,CAAc;AACjBC,sBAAM,KAAKlB,IADM;AAEjBe,0BAAUA;AAFO,aAAd,CAAP;AAIH;;;;;;kBA7DgBjB,U","file":"Repository.js","sourcesContent":["import Provider from \"./Provider\";\nimport Queryable from \"../queryable/Queryable\";\nimport EntityToSqlFactory from \"./factories/EntityToSqlFactory\";\nimport Sqlite3Wrapper from \"./Sqlite3Wrapper\";\n\nexport default class Repository {\n    constructor({ database, name, primaryKeys = [\"id\"] }) {\n        this.name = name;\n        this.database = database;\n        this.sqliteDatabaseWrapper = new Sqlite3Wrapper(this.database);\n        this.primaryKeys = primaryKeys;\n    }\n\n    addAsync(entity) {\n\n        const entityToSqlFactory = new EntityToSqlFactory({\n            tableName: this.name,\n            entity,\n            primaryKeys: this.primaryKeys\n        });\n\n        const { sql, values } = entityToSqlFactory.createInsertStatement();\n\n        return this.sqliteDatabaseWrapper.runAsync(sql, values);\n\n    }\n\n    removeAsync(entity) {\n        const entityToSqlFactory = new EntityToSqlFactory({\n            tableName: this.name,\n            entity,\n            primaryKeys: this.primaryKeys\n        });\n\n        const { sql, values } = entityToSqlFactory.createDeleteStatement();\n\n        return this.sqliteDatabaseWrapper.runAsync(sql, values);\n    }\n\n    updateAsync(entity) {\n\n        const entityToSqlFactory = new EntityToSqlFactory({\n            tableName: this.name,\n            entity,\n            primaryKeys: this.primaryKeys\n        });\n\n        const { sql, values } = entityToSqlFactory.createUpdateStatement();\n\n        return this.sqliteDatabaseWrapper.runAsync(sql, values);\n\n    }\n\n    getQueryProvider() {\n        return new Provider({\n            database: this.database\n        });\n    }\n\n    where() {\n        const provider = this.getQueryProvider();\n\n        return new Queryable({\n            type: this.name,\n            provider: provider\n        });\n    }\n\n}"]}