{"version":3,"sources":["../../../src/sqlite/statements/UniqueExpressionCreator.js"],"names":["UniqueExpressionCreator","unique","conflictOption","columns","map","column","SqliteUtils","escapeName","expression","uniqueExpression","createUniqueExpression","conflictOptions","createUniqueConflictResolution","push","join"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,uB;AACjB,qCAAYC,MAAZ,EAAmB;AAAA;;AACf,aAAKA,MAAL,GAAcA,MAAd;AACH;;;;mDAE0B;AACvB,gBAAI,KAAKA,MAAL,CAAYC,cAAZ,IAA8B,IAAlC,EAAwC;AACpC,uBAAO,EAAP;AACH;AACJ;;;iDAEuB;AACpB,iBAAKD,MAAL,CAAYE,OAAZ,CAAoBC,GAApB,CAAwB,UAACC,MAAD,EAAY;AAChC,uBAAOC,sBAAYC,UAAZ,CAAuBF,MAAvB,CAAP;AACH,aAFD;;AAID,gCAAkBF,OAAlB;AACF;;;2CAEkB;AACf,gBAAMF,SAAS,KAAKA,MAApB;AACA,gBAAMO,aAAa,EAAnB;AACA,gBAAMC,mBAAmB,KAAKC,sBAAL,CAA4BT,MAA5B,CAAzB;AACA,gBAAMU,kBAAkB,KAAKC,8BAAL,CAAoCX,OAAOU,eAA3C,CAAxB;;AAEAH,uBAAWK,IAAX,CAAgBJ,gBAAhB;;AAEA,gBAAIE,mBAAmB,EAAvB,EAA2B;AACvBH,2BAAWK,IAAX,kBAA+BF,eAA/B;AACH;;AAED,mBAAOH,WAAWM,IAAX,CAAgB,GAAhB,CAAP;AACH;;;;;;kBAhCgBd,uB","file":"UniqueExpressionCreator.js","sourcesContent":["import SqliteUtils from \"../utils/SqliteUtils\";\n\nexport default class UniqueExpressionCreator {\n    constructor(unique){\n        this.unique = unique;\n    }\n\n    createConflictResolution() {\n        if (this.unique.conflictOption == null) {\n            return \"\";\n        }\n    }\n\n    createUniqueExpression(){\n        this.unique.columns.map((column) => {\n            return SqliteUtils.escapeName(column);\n        });\n\n       return `UNIQUE (${columns})`;\n    }\n\n    createExpression() {\n        const unique = this.unique;\n        const expression = [];\n        const uniqueExpression = this.createUniqueExpression(unique);\n        const conflictOptions = this.createUniqueConflictResolution(unique.conflictOptions);\n        \n        expression.push(uniqueExpression);\n\n        if (conflictOptions != \"\") {\n            expression.push(`ON CONFLICT ${conflictOptions}`);\n        }\n\n        return expression.join(\" \");\n    }\n\n}"]}