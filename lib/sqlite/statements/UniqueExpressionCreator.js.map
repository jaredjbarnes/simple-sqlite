{"version":3,"sources":["../../../src/sqlite/statements/UniqueExpressionCreator.js"],"names":["UniqueExpressionCreator","unique","columns","conflictOption","map","column","SqliteUtils","escapeName","expression","uniqueExpression","createUniqueExpression","conflictOptions","createConflictResolution","push","join"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,uB;AACjB,qCAAYC,MAAZ,EAAoB;AAAA;;AAChB,aAAKA,MAAL,GAAcA,UAAU,EAAEC,SAAS,EAAX,EAAeC,gBAAgB,IAA/B,EAAxB;AACH;;;;mDAE0B;AACvB,gBAAI,KAAKF,MAAL,CAAYE,cAAZ,IAA8B,IAAlC,EAAwC;AACpC,uBAAO,EAAP;AACH;AACD,mBAAO,KAAKF,MAAL,CAAYE,cAAnB;AACH;;;iDAEwB;AACrB,gBAAMD,UAAU,KAAKD,MAAL,CAAYC,OAAZ,CAAoBE,GAApB,CAAwB,UAACC,MAAD,EAAY;AAChD,uBAAOC,sBAAYC,UAAZ,CAAuBF,MAAvB,CAAP;AACH,aAFe,CAAhB;;AAIA,gCAAkBH,OAAlB;AACH;;;2CAEkB;AACf,gBAAMM,aAAa,EAAnB;AACA,gBAAMC,mBAAmB,KAAKC,sBAAL,EAAzB;AACA,gBAAMC,kBAAkB,KAAKC,wBAAL,EAAxB;;AAEAJ,uBAAWK,IAAX,CAAgBJ,gBAAhB;;AAEA,gBAAIE,mBAAmB,EAAvB,EAA2B;AACvBH,2BAAWK,IAAX,kBAA+BF,eAA/B;AACH;;AAED,mBAAOH,WAAWM,IAAX,CAAgB,GAAhB,CAAP;AACH;;;;;;kBAhCgBd,uB","file":"UniqueExpressionCreator.js","sourcesContent":["import SqliteUtils from \"../utils/SqliteUtils\";\n\nexport default class UniqueExpressionCreator {\n    constructor(unique) {\n        this.unique = unique || { columns: [], conflictOption: null };\n    }\n\n    createConflictResolution() {\n        if (this.unique.conflictOption == null) {\n            return \"\";\n        }\n        return this.unique.conflictOption;\n    }\n\n    createUniqueExpression() {\n        const columns = this.unique.columns.map((column) => {\n            return SqliteUtils.escapeName(column);\n        });\n\n        return `UNIQUE (${columns})`;\n    }\n\n    createExpression() {\n        const expression = [];\n        const uniqueExpression = this.createUniqueExpression();\n        const conflictOptions = this.createConflictResolution();\n\n        expression.push(uniqueExpression);\n\n        if (conflictOptions != \"\") {\n            expression.push(`ON CONFLICT ${conflictOptions}`);\n        }\n\n        return expression.join(\" \");\n    }\n\n}"]}