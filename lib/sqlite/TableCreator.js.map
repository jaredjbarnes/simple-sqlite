{"version":3,"sources":["../../src/sqlite/TableCreator.js"],"names":["TableCreator","constructor","database","schema","sqliteDatabaseWrapper","Sqlite3Wrapper","tableStatementCreator","TableStatementCreator","createTableIfNotExistsAsync","tableCreator","createTablesIfNotExistsAsync","schemas","promises","map","Promise","all","dropTableIfExistsAsync","sql","values","createTableStatement","indexStatement","createIndexStatements","runAsync","createDropTableStatment"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,MAAMA,YAAN,CAAmB;AAC9BC,EAAAA,WAAW,CAAC;AACRC,IAAAA,QADQ;AAERC,IAAAA;AAFQ,GAAD,EAGR;AACC,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,qBAAL,GAA6B,IAAIC,uBAAJ,CAAmBH,QAAnB,CAA7B;AACA,SAAKI,qBAAL,GAA6B,IAAIC,8BAAJ,CAA0BJ,MAA1B,CAA7B;AACH;;AAED,eAAaK,2BAAb,CAAyC;AAAEN,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAzC,EAA+D;AAC3D,UAAMM,YAAY,GAAG,IAAIT,YAAJ,CAAiB;AAClCE,MAAAA,QAAQ,EAAEA,QADwB;AAElCC,MAAAA;AAFkC,KAAjB,CAArB;AAKA,WAAO,MAAMM,YAAY,CAACD,2BAAb,EAAb;AACH;;AAED,eAAaE,4BAAb,CAA0C;AAAER,IAAAA,QAAF;AAAYS,IAAAA;AAAZ,GAA1C,EAAiE;AAC7D,UAAMC,QAAQ,GAAGD,OAAO,CAACE,GAAR,CAAaV,MAAD,IAAY;AACrC,YAAMM,YAAY,GAAG,IAAIT,YAAJ,CAAiB;AAClCE,QAAAA,QAAQ,EAAEA,QADwB;AAElCC,QAAAA;AAFkC,OAAjB,CAArB;AAKA,aAAOM,YAAY,CAACD,2BAAb,EAAP;AACH,KAPgB,CAAjB;AASA,WAAO,MAAMM,OAAO,CAACC,GAAR,CAAYH,QAAZ,CAAb;AACH;;AAED,eAAaI,sBAAb,CAAoC;AAAEd,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAApC,EAA0D;AACtD,UAAMM,YAAY,GAAG,IAAIT,YAAJ,CAAiB;AAClCE,MAAAA,QAAQ,EAAEA,QADwB;AAElCC,MAAAA;AAFkC,KAAjB,CAArB;AAKA,WAAO,MAAMM,YAAY,CAACO,sBAAb,EAAb;AACH;;AAED,eAAaA,sBAAb,CAAoC;AAAEd,IAAAA,QAAF;AAAYS,IAAAA;AAAZ,GAApC,EAA2D;AAEvD,UAAMC,QAAQ,GAAGD,OAAO,CAACE,GAAR,CAAaV,MAAD,IAAY;AACrC,YAAMM,YAAY,GAAG,IAAIT,YAAJ,CAAiB;AAClCE,QAAAA,QAAQ,EAAEA,QADwB;AAElCC,QAAAA;AAFkC,OAAjB,CAArB;AAKA,aAAOM,YAAY,CAACO,sBAAb,EAAP;AACH,KAPgB,CAAjB;AASA,WAAO,MAAMF,OAAO,CAACC,GAAR,CAAYH,QAAZ,CAAb;AACH;;AAED,QAAMJ,2BAAN,GAAoC;AAChC,QAAI;AACAS,MAAAA,GADA;AAEAC,MAAAA;AAFA,QAGA,KAAKZ,qBAAL,CAA2Ba,oBAA3B,EAHJ;AAKA,UAAMC,cAAc,GAAG,KAAKd,qBAAL,CAA2Be,qBAA3B,EAAvB;;AAEA,QAAID,cAAc,IAAI,IAAtB,EAA2B;AACvBH,MAAAA,GAAG,GAAI,GAAEA,GAAI,KAAIG,cAAe,EAAhC;AACH;;AAED,WAAO,MAAM,KAAKhB,qBAAL,CAA2BkB,QAA3B,CAAoCL,GAApC,EAAyCC,MAAzC,CAAb;AACH;;AAED,QAAMF,sBAAN,GAA+B;AAC3B,UAAM;AACFC,MAAAA,GADE;AAEFC,MAAAA;AAFE,QAGF,KAAKZ,qBAAL,CAA2BiB,uBAA3B,EAHJ;AAKA,WAAO,MAAM,KAAKnB,qBAAL,CAA2BkB,QAA3B,CAAoCL,GAApC,EAAyCC,MAAzC,CAAb;AACH;;AA9E6B","sourcesContent":["import Sqlite3Wrapper from \"./Sqlite3Wrapper\";\nimport TableStatementCreator from \"./statements/TableStatementCreator\";\n\nexport default class TableCreator {\n    constructor({\n        database,\n        schema\n    }) {\n        this.database = database;\n        this.schema = schema;\n        this.sqliteDatabaseWrapper = new Sqlite3Wrapper(database);\n        this.tableStatementCreator = new TableStatementCreator(schema);\n    }\n\n    static async createTableIfNotExistsAsync({ database, schema }) {\n        const tableCreator = new TableCreator({\n            database: database,\n            schema\n        });\n\n        return await tableCreator.createTableIfNotExistsAsync();\n    }\n\n    static async createTablesIfNotExistsAsync({ database, schemas }) {\n        const promises = schemas.map((schema) => {\n            const tableCreator = new TableCreator({\n                database: database,\n                schema\n            });\n\n            return tableCreator.createTableIfNotExistsAsync();\n        });\n\n        return await Promise.all(promises);\n    }\n\n    static async dropTableIfExistsAsync({ database, schema }) {\n        const tableCreator = new TableCreator({\n            database: database,\n            schema\n        });\n\n        return await tableCreator.dropTableIfExistsAsync();\n    }\n\n    static async dropTableIfExistsAsync({ database, schemas }) {\n\n        const promises = schemas.map((schema) => {\n            const tableCreator = new TableCreator({\n                database: database,\n                schema\n            });\n\n            return tableCreator.dropTableIfExistsAsync();\n        });\n\n        return await Promise.all(promises);\n    }\n\n    async createTableIfNotExistsAsync() {\n        let {\n            sql,\n            values\n        } = this.tableStatementCreator.createTableStatement();\n\n        const indexStatement = this.tableStatementCreator.createIndexStatements();\n        \n        if (indexStatement != null){\n            sql = `${sql}; ${indexStatement}`;\n        }\n\n        return await this.sqliteDatabaseWrapper.runAsync(sql, values);\n    }\n\n    async dropTableIfExistsAsync() {\n        const {\n            sql,\n            values\n        } = this.tableStatementCreator.createDropTableStatment();\n\n        return await this.sqliteDatabaseWrapper.runAsync(sql, values);\n    }\n}"],"file":"TableCreator.js"}